<section class="report-gen">
	<header class="report-gen__header flex align-center justify-end mb-md">
		<p-button class="button-min-width"
		          label="Nuevo"
		          icon="bi bi-plus-lg"
		          size="small"
		          [disabled]="!!dataSource().length"
		          (click)="newReport()"/>
	</header>

	<p-table [rows]="5" [value]="dataSource()" [paginator]="!!dataSource().length">
		<ng-template pTemplate="header">
			<tr>
				<th>Producto</th>
				<th style="width: 10%">Año</th>
				<th style="width: 10%">Mes</th>
				<th style="width: 10%">Usuario</th>
				<th style="width: 10%">Fec. creación</th>
				<th style="width: 15%">Estado</th>
				<th style="width: 10%">Acciones</th>
			</tr>
		</ng-template>
		<ng-template pTemplate="emptymessage">
			<tr>
				<td colspan="7" class="text-center">
					No existe información
				</td>
			</tr>
		</ng-template>
		<ng-template pTemplate="body" let-item>
			<tr>
				<td>{{ item.product }}</td>
				<td>{{ item.year }}</td>
				<td>{{ item.month }}</td>
				<td>
					John Doe
				</td>
				<td>{{ item.createdAt | date: 'd.M.yy' }}</td>
				<td>
					<p-tag [severity]="item.status.severity"
					       [icon]="item.status.codde === 'FINISHED' ? 'bi bi-check-lg' : ''"
					       [value]="item.status.label"/>
				</td>
				<td>
					<p-button [class]="item.status.code !== 'FINISHED' ? '' : 'button-excel'"
					          [severity]="item.status.code !== 'FINISHED' ? 'secondary' : 'success'"
					          label="Exportar"
					          icon="bi bi-file-earmark-excel"
					          size="small"
					          [pTooltip]="item.status.code !== 'FINISHED' ? 'El reporte aún no ha sido generado' : 'Exportar a Excel'"
					          [disabled]="item.status.code !== 'FINISHED'"
					          tooltipPosition="bottom"
					          (click)="export()"/>
				</td>
			</tr>
		</ng-template>
	</p-table>
</section>
